/*! For license information please see 1.d554e1a07742c53d39d6.chunk.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{13:function(t,e,n){"use strict";var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function i(t,e,n,r){return new(n||(n=Promise))((function(o,i){function s(t){try{u(r.next(t))}catch(e){i(e)}}function a(t){try{u(r.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function s(t,e){var n,r,o,i,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return s.label++,{value:i[1],done:!1};case 5:s.label++,r=i[1],i=[0];continue;case 7:i=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){s=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){s.label=i[1];break}if(6===i[0]&&s.label<o[1]){s.label=o[1],o=i;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(i);break}o[2]&&s.ops.pop(),s.trys.pop();continue}i=e.call(t,s)}catch(a){i=[6,a],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}function a(t){var e="function"===typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"===typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function u(t,e){var n="function"===typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function c(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(u(arguments[e]));return t}function h(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 1===t.length?t[0]:t.reduce((function(t,e){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t(e.apply(void 0,c(n)))}}))}function l(t){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function f(t){if(t)return Object.keys(t).forEach((function(e){"string"!==typeof t[e]&&"boolean"!==typeof t[e]&&"number"!==typeof t[e]&&(t[e]=JSON.stringify(t[e]))})),t}function p(t){if("undefined"!==typeof t.stacktrace||"undefined"!==typeof t["opera#sourceloc"]){var e=t.stacktrace;return(void 0===e?"":e).split("\n").filter((function(t){return""!==t}))}if(t.stack){var n=t.stack;return(void 0===n?"":n).split("\n").filter((function(t){return""!==t}))}return["No stacktrace available"]}var d=function(){function t(t){this._data=t}return t.prototype.toJSON=function(){return JSON.stringify(this._data)},t.prototype.serialize=function(){return this._data},t}(),v=function(){function t(){}return t.serialize=function(){return{transport:this.transport(),origin:this.origin()}},t.origin=function(){return"ReactNative"!==navigator.product||window.location?window.location.origin||window.location.protocol+"//"+window.location.hostname:""},t.transport=function(){return window.XDomainRequest?"XDomainRequest":window.XMLHttpRequest&&!window.fetch?"XMLHttpRequest":"fetch"},t.supportsPromises=function(){return"Promise"in window&&"resolve"in window.Promise&&"reject"in window.Promise&&"all"in window.Promise&&"race"in window.Promise&&(new window.Promise((function(e){t=e})),"function"===typeof t);var t},t}(),y=function(){function t(t){this.url=t}return t.prototype.send=function(t){var e=this;return new Promise((function(n,r){var o=new XDomainRequest,i=new RegExp("^https?:");o.onload=function(){return n({})},o.open("POST",e.url.replace(i,window.location.protocol)),setTimeout((function(){try{o.send(t)}catch(e){r(e)}}),0)}))},t}(),m=function(){function t(t){this.url=t}return t.prototype.send=function(t){var e=this;return new Promise((function(n,r){try{var o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===XMLHttpRequest.DONE&&n({})},o.open("POST",e.url),o.send(t)}catch(i){r(i)}}))},t}(),g=function(){function t(t,e){this.url=t}return t.prototype.send=function(t){return i(this,void 0,void 0,(function(){var e,n;return s(this,(function(r){switch(r.label){case 0:return[4,fetch(this.url,{method:"POST",body:t})];case 1:return e=r.sent(),n=e.statusText,[2,e.ok?Promise.resolve({}):Promise.reject({statusText:n})]}}))}))},t}(),b=function(){function t(t){this._uri=t.uri||"https://appsignal-endpoint.net/collect",this._apiKey=t.key,this._clientVersion=t.version,this._transport=this._createTransport()}return t.prototype.push=function(t){return i(this,void 0,void 0,(function(){return s(this,(function(e){switch(e.label){case 0:return[4,this._transport.send(t.toJSON())];case 1:return e.sent(),[2,t]}}))}))},t.prototype._createTransport=function(){var t=this._url();switch(v.transport()){case"XDomainRequest":return new y(t);case"XMLHttpRequest":return new m(t);default:return new g(t)}},t.prototype._url=function(){var t,e=this._authorization();return this._uri+"?"+(t=e,Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&"))},t.prototype._authorization=function(){return{api_key:this._apiKey,version:this._clientVersion}},t}(),k=function(t){function e(e){return t.call(this,o({timestamp:Math.round((new Date).getTime()/1e3),namespace:"frontend",error:{name:"NullError",message:"No error has been set",backtrace:[]}},e))||this}return function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.setAction=function(t){return t&&"string"===typeof t?(this._data.action=t,this):this},e.prototype.setNamespace=function(t){return t&&"string"===typeof t?(this._data.namespace=t,this):this},e.prototype.setError=function(t){return t?(this._data.error={name:t.name||"Error",message:t.message||"No message given",backtrace:p(t)},this):this},e.prototype.setTags=function(t){return this._data.tags=o(o({},this._data.tags),function(t){if(t)return Object.keys(t).forEach((function(e){"object"===l(t[e])&&(t[e]=JSON.stringify(t[e])),t[e]=String(t[e])})),t}(t)),this},e.prototype.setParams=function(t){return this._data.params=o(o({},this._data.params),t),this},e.prototype.setBreadcrumbs=function(t){return this._data.breadcrumbs=t,this},e}(d),w=function(){function t(t){this._data=t||[]}return t.prototype.clear=function(){this._data=[]},t.prototype.values=function(){return this._data},t.prototype.push=function(t){var e;(e=this._data).push.apply(e,c(t))},t.prototype.drain=function(){return s(this,(function(t){switch(t.label){case 0:return this._data.length>0?[4,this._data.shift()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}}))},t}(),_=function(){function t(t,e,n){this._retries=0,this._timerID=0,this._duration=0,this._api=e,this._queue=t,this.options=o({limit:5,initialDuration:1e3},n),this.reset()}return t.prototype.schedule=function(t){var e=this;void 0===t&&(t=this._duration);return window.setTimeout((function(){return i(e,void 0,void 0,(function(){var e,n,r,o,i,u,c;return s(this,(function(s){switch(s.label){case 0:s.trys.push([0,7,8,9]),e=a(this._queue.drain()),n=e.next(),s.label=1;case 1:if(n.done)return[3,6];if(!(r=n.value))return[2];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,this._api.push(r)];case 3:return s.sent(),[3,5];case 4:return s.sent(),o=Math.floor(Math.pow(t,1.3)),this._retries=this._retries-1,0===this._retries?this.reset():(this._queue.push(r),this._timerID=this.schedule(o)),[2];case 5:return n=e.next(),[3,1];case 6:return[3,9];case 7:return i=s.sent(),u={error:i},[3,9];case 8:try{n&&!n.done&&(c=e.return)&&c.call(e)}finally{if(u)throw u.error}return[7];case 9:return this.reset(),[2]}}))}))}),t)},t.prototype.reset=function(){var t=this.options,e=t.limit,n=t.initialDuration;this._retries=e,this._duration=n},t}(),j=function(){function t(t){this.VERSION="1.2.0",this._hooks={decorators:Array(),overrides:Array()},this._env=v.serialize(),this._queue=new w(window.__APPSIGNAL_QUEUE__||[]);var e=t.key,n=t.uri,r=t.revision;r&&"string"!==typeof r&&(t.revision=String(r)),this._api=new b({key:e,uri:n,version:this.VERSION}),this.ignored=t.ignoreErrors||[],this._breadcrumbs=[],this._dispatcher=new _(this._queue,this._api),this._options=t}return t.prototype.send=function(t,e,n){var r=this;if(void 0===e&&(e={}),t instanceof Error||t instanceof k){if(0!==this.ignored.length){if(t instanceof Error&&this.ignored.some((function(e){return e.test(t.message)})))return void console.warn("[APPSIGNAL]: Ignored an error: "+t.message);if(t instanceof k){var o=t.serialize().error;if(o.message&&this.ignored.some((function(t){return t.test(o.message)})))return void console.warn("[APPSIGNAL]: Ignored a span: "+o.message)}}var i=t instanceof k?t:this._createSpanFromError(t);return this._hooks.decorators.length>0&&h.apply(void 0,c(this._hooks.decorators))(i),e&&i.setTags(e),n&&i.setNamespace(n),this._breadcrumbs.length>0&&i.setBreadcrumbs(this._breadcrumbs),this._hooks.overrides.length>0&&h.apply(void 0,c(this._hooks.overrides))(i),v.supportsPromises()?(this._breadcrumbs=[],this._api.push(i).catch((function(){r._queue.push(i),setTimeout((function(){return r._dispatcher.schedule()}),0)}))):void console.error("[APPSIGNAL]: Error not sent. A Promise polyfill is required.")}console.error("[APPSIGNAL]: Can't send error, given error is not a valid type")},t.prototype.sendError=function(t,e,n){return this.send(t,e,n)},t.prototype.use=function(t){t.call(this)},t.prototype.createSpan=function(t){var e=this._options,n=e.revision,r=void 0===n?"":n,o=e.namespace,i=new k({environment:this._env,revision:r});return o&&i.setNamespace(o),t&&"function"===typeof t&&t(i),i},t.prototype.wrap=function(t,e,n){return void 0===e&&(e={}),i(this,void 0,void 0,(function(){var r;return s(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,4]),[4,t()];case 1:return[2,o.sent()];case 2:return r=o.sent(),[4,this.sendError(r,e,n)];case 3:return o.sent(),[2,Promise.reject(r)];case 4:return[2]}}))}))},t.prototype.addDecorator=function(t){this._hooks.decorators.push(t)},t.prototype.addOverride=function(t){this._hooks.overrides.push(t)},t.prototype.demo=function(){var t=this._createSpanFromError(new Error("Hello world! This is an error used for demonstration purposes."));t.setAction("TestAction").setParams({path:"/hello",method:"GET"}).setTags({demo_sample:"true"}),this.send(t)},t.prototype.addBreadcrumb=function(t){var e=o(o({timestamp:Math.round((new Date).getTime()/1e3)},t),{metadata:f(t.metadata)});e.category?e.action?(20===this._breadcrumbs.length&&this._breadcrumbs.pop(),this._breadcrumbs.unshift(e)):console.warn("[APPSIGNAL]: Breadcrumb not added. `action` is missing."):console.warn("[APPSIGNAL]: Breadcrumb not added. `category` is missing.")},t.prototype._createSpanFromError=function(t){var e=this.createSpan();return e.setError(t),e},t}();e.a=j},24:function(t,e,n){(function(t){var n,r,o,i;function s(t){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==s(t)&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){(function(e){t.exports=e.Phoenix=n(2)}).call(this,n(1))},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==("undefined"===typeof window?"undefined":s(window))&&(n=window)}t.exports=n},function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==s(Symbol.iterator)?function(t){return s(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":s(t)})(t)}function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function u(t,e,n){return e&&a(t.prototype,e),n&&a(t,n),t}n.r(e),n.d(e,"Channel",(function(){return O})),n.d(e,"Serializer",(function(){return A})),n.d(e,"Socket",(function(){return N})),n.d(e,"LongPoll",(function(){return M})),n.d(e,"Ajax",(function(){return I})),n.d(e,"Presence",(function(){return q}));var c="undefined"!=typeof self?self:null,h="undefined"!=typeof window?window:null,l=c||h||void 0,f="2.0.0",p=0,d=1,v=2,y=3,m="closed",g="errored",b="joined",k="joining",w="leaving",_="phx_close",j="phx_error",E="phx_join",S="phx_reply",R="phx_leave",T=[_,j,E,S,R],P="longpoll",x="websocket",C=function(t){return"function"==typeof t?t:function(){return t}},L=function(){function t(e,n,r,o){i(this,t),this.channel=e,this.event=n,this.payload=r||function(){return{}},this.receivedResp=null,this.timeout=o,this.timeoutTimer=null,this.recHooks=[],this.sent=!1}return u(t,[{key:"resend",value:function(t){this.timeout=t,this.reset(),this.send()}},{key:"send",value:function(){this.hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload(),ref:this.ref,join_ref:this.channel.joinRef()}))}},{key:"receive",value:function(t,e){return this.hasReceived(t)&&e(this.receivedResp.response),this.recHooks.push({status:t,callback:e}),this}},{key:"reset",value:function(){this.cancelRefEvent(),this.ref=null,this.refEvent=null,this.receivedResp=null,this.sent=!1}},{key:"matchReceive",value:function(t){var e=t.status,n=t.response;t.ref,this.recHooks.filter((function(t){return t.status===e})).forEach((function(t){return t.callback(n)}))}},{key:"cancelRefEvent",value:function(){this.refEvent&&this.channel.off(this.refEvent)}},{key:"cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=null}},{key:"startTimeout",value:function(){var t=this;this.timeoutTimer&&this.cancelTimeout(),this.ref=this.channel.socket.makeRef(),this.refEvent=this.channel.replyEventName(this.ref),this.channel.on(this.refEvent,(function(e){t.cancelRefEvent(),t.cancelTimeout(),t.receivedResp=e,t.matchReceive(e)})),this.timeoutTimer=setTimeout((function(){t.trigger("timeout",{})}),this.timeout)}},{key:"hasReceived",value:function(t){return this.receivedResp&&this.receivedResp.status===t}},{key:"trigger",value:function(t,e){this.channel.trigger(this.refEvent,{status:t,response:e})}}]),t}(),O=function(){function t(e,n,r){var o=this;i(this,t),this.state=m,this.topic=e,this.params=C(n||{}),this.socket=r,this.bindings=[],this.bindingRef=0,this.timeout=this.socket.timeout,this.joinedOnce=!1,this.joinPush=new L(this,E,this.params,this.timeout),this.pushBuffer=[],this.stateChangeRefs=[],this.rejoinTimer=new H((function(){o.socket.isConnected()&&o.rejoin()}),this.socket.rejoinAfterMs),this.stateChangeRefs.push(this.socket.onError((function(){return o.rejoinTimer.reset()}))),this.stateChangeRefs.push(this.socket.onOpen((function(){o.rejoinTimer.reset(),o.isErrored()&&o.rejoin()}))),this.joinPush.receive("ok",(function(){o.state=b,o.rejoinTimer.reset(),o.pushBuffer.forEach((function(t){return t.send()})),o.pushBuffer=[]})),this.joinPush.receive("error",(function(){o.state=g,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.onClose((function(){o.rejoinTimer.reset(),o.socket.hasLogger()&&o.socket.log("channel","close ".concat(o.topic," ").concat(o.joinRef())),o.state=m,o.socket.remove(o)})),this.onError((function(t){o.socket.hasLogger()&&o.socket.log("channel","error ".concat(o.topic),t),o.isJoining()&&o.joinPush.reset(),o.state=g,o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.joinPush.receive("timeout",(function(){o.socket.hasLogger()&&o.socket.log("channel","timeout ".concat(o.topic," (").concat(o.joinRef(),")"),o.joinPush.timeout),new L(o,R,C({}),o.timeout).send(),o.state=g,o.joinPush.reset(),o.socket.isConnected()&&o.rejoinTimer.scheduleTimeout()})),this.on(S,(function(t,e){o.trigger(o.replyEventName(e),t)}))}return u(t,[{key:"join",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;if(this.joinedOnce)throw new Error("tried to join multiple times. 'join' can only be called a single time per channel instance");return this.timeout=t,this.joinedOnce=!0,this.rejoin(),this.joinPush}},{key:"onClose",value:function(t){this.on(_,t)}},{key:"onError",value:function(t){return this.on(j,(function(e){return t(e)}))}},{key:"on",value:function(t,e){var n=this.bindingRef++;return this.bindings.push({event:t,ref:n,callback:e}),n}},{key:"off",value:function(t,e){this.bindings=this.bindings.filter((function(n){return!(n.event===t&&(void 0===e||e===n.ref))}))}},{key:"canPush",value:function(){return this.socket.isConnected()&&this.isJoined()}},{key:"push",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw new Error("tried to push '".concat(t,"' to '").concat(this.topic,"' before joining. Use channel.join() before pushing events"));var r=new L(this,t,(function(){return e}),n);return this.canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}},{key:"leave",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.rejoinTimer.reset(),this.joinPush.cancelTimeout(),this.state=w;var n=function(){t.socket.hasLogger()&&t.socket.log("channel","leave ".concat(t.topic)),t.trigger(_,"leave")},r=new L(this,R,C({}),e);return r.receive("ok",(function(){return n()})).receive("timeout",(function(){return n()})),r.send(),this.canPush()||r.trigger("ok",{}),r}},{key:"onMessage",value:function(t,e,n){return e}},{key:"isLifecycleEvent",value:function(t){return T.indexOf(t)>=0}},{key:"isMember",value:function(t,e,n,r){return this.topic===t&&(!r||r===this.joinRef()||!this.isLifecycleEvent(e)||(this.socket.hasLogger()&&this.socket.log("channel","dropping outdated message",{topic:t,event:e,payload:n,joinRef:r}),!1))}},{key:"joinRef",value:function(){return this.joinPush.ref}},{key:"sendJoin",value:function(t){this.state=k,this.joinPush.resend(t)}},{key:"rejoin",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.isLeaving()||this.sendJoin(t)}},{key:"trigger",value:function(t,e,n,r){var o=this.onMessage(t,e,n,r);if(e&&!o)throw new Error("channel onMessage callbacks must return the payload, modified or unmodified");for(var i=0;i<this.bindings.length;i++){var s=this.bindings[i];s.event===t&&s.callback(o,n,r||this.joinRef())}}},{key:"replyEventName",value:function(t){return"chan_reply_".concat(t)}},{key:"isClosed",value:function(){return this.state===m}},{key:"isErrored",value:function(){return this.state===g}},{key:"isJoined",value:function(){return this.state===b}},{key:"isJoining",value:function(){return this.state===k}},{key:"isLeaving",value:function(){return this.state===w}}]),t}(),A={encode:function(t,e){var n=[t.join_ref,t.ref,t.topic,t.event,t.payload];return e(JSON.stringify(n))},decode:function(t,e){var n=o(JSON.parse(t),5);return e({join_ref:n[0],ref:n[1],topic:n[2],event:n[3],payload:n[4]})}},N=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.channels=[],this.sendBuffer=[],this.ref=0,this.timeout=r.timeout||1e4,this.transport=r.transport||l.WebSocket||M,this.defaultEncoder=A.encode,this.defaultDecoder=A.decode,this.closeWasClean=!1,this.unloaded=!1,this.binaryType=r.binaryType||"arraybuffer",this.transport!==M?(this.encode=r.encode||this.defaultEncoder,this.decode=r.decode||this.defaultDecoder):(this.encode=this.defaultEncoder,this.decode=this.defaultDecoder),h&&h.addEventListener&&h.addEventListener("unload",(function(t){n.conn&&(n.unloaded=!0,n.abnormalClose("unloaded"))})),this.heartbeatIntervalMs=r.heartbeatIntervalMs||3e4,this.rejoinAfterMs=function(t){return r.rejoinAfterMs?r.rejoinAfterMs(t):[1e3,2e3,5e3][t-1]||1e4},this.reconnectAfterMs=function(t){return n.unloaded?100:r.reconnectAfterMs?r.reconnectAfterMs(t):[10,50,100,150,200,250,500,1e3,2e3][t-1]||5e3},this.logger=r.logger||null,this.longpollerTimeout=r.longpollerTimeout||2e4,this.params=C(r.params||{}),this.endPoint="".concat(e,"/").concat(x),this.vsn=r.vsn||f,this.heartbeatTimer=null,this.pendingHeartbeatRef=null,this.reconnectTimer=new H((function(){n.teardown((function(){return n.connect()}))}),this.reconnectAfterMs)}return u(t,[{key:"protocol",value:function(){return location.protocol.match(/^https/)?"wss":"ws"}},{key:"endPointURL",value:function(){var t=I.appendParams(I.appendParams(this.endPoint,this.params()),{vsn:this.vsn});return"/"!==t.charAt(0)?t:"/"===t.charAt(1)?"".concat(this.protocol(),":").concat(t):"".concat(this.protocol(),"://").concat(location.host).concat(t)}},{key:"disconnect",value:function(t,e,n){this.closeWasClean=!0,this.reconnectTimer.reset(),this.teardown(t,e,n)}},{key:"connect",value:function(t){var e=this;t&&(console&&console.log("passing params to connect is deprecated. Instead pass :params to the Socket constructor"),this.params=C(t)),this.conn||(this.closeWasClean=!1,this.conn=new this.transport(this.endPointURL()),this.conn.binaryType=this.binaryType,this.conn.timeout=this.longpollerTimeout,this.conn.onopen=function(){return e.onConnOpen()},this.conn.onerror=function(t){return e.onConnError(t)},this.conn.onmessage=function(t){return e.onConnMessage(t)},this.conn.onclose=function(t){return e.onConnClose(t)})}},{key:"log",value:function(t,e,n){this.logger(t,e,n)}},{key:"hasLogger",value:function(){return null!==this.logger}},{key:"onOpen",value:function(t){var e=this.makeRef();return this.stateChangeCallbacks.open.push([e,t]),e}},{key:"onClose",value:function(t){var e=this.makeRef();return this.stateChangeCallbacks.close.push([e,t]),e}},{key:"onError",value:function(t){var e=this.makeRef();return this.stateChangeCallbacks.error.push([e,t]),e}},{key:"onMessage",value:function(t){var e=this.makeRef();return this.stateChangeCallbacks.message.push([e,t]),e}},{key:"onConnOpen",value:function(){this.hasLogger()&&this.log("transport","connected to ".concat(this.endPointURL())),this.unloaded=!1,this.closeWasClean=!1,this.flushSendBuffer(),this.reconnectTimer.reset(),this.resetHeartbeat(),this.stateChangeCallbacks.open.forEach((function(t){return(0,o(t,2)[1])()}))}},{key:"resetHeartbeat",value:function(){var t=this;this.conn&&this.conn.skipHeartbeat||(this.pendingHeartbeatRef=null,clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((function(){return t.sendHeartbeat()}),this.heartbeatIntervalMs))}},{key:"teardown",value:function(t,e,n){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,n||""):this.conn.close(),this.conn=null),t&&t()}},{key:"onConnClose",value:function(t){this.hasLogger()&&this.log("transport","close",t),this.triggerChanError(),clearInterval(this.heartbeatTimer),this.closeWasClean||this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((function(e){return(0,o(e,2)[1])(t)}))}},{key:"onConnError",value:function(t){this.hasLogger()&&this.log("transport",t),this.triggerChanError(),this.stateChangeCallbacks.error.forEach((function(e){return(0,o(e,2)[1])(t)}))}},{key:"triggerChanError",value:function(){this.channels.forEach((function(t){t.isErrored()||t.isLeaving()||t.isClosed()||t.trigger(j)}))}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case p:return"connecting";case d:return"open";case v:return"closing";default:return"closed"}}},{key:"isConnected",value:function(){return"open"===this.connectionState()}},{key:"remove",value:function(t){this.off(t.stateChangeRefs),this.channels=this.channels.filter((function(e){return e.joinRef()!==t.joinRef()}))}},{key:"off",value:function(t){for(var e in this.stateChangeCallbacks)this.stateChangeCallbacks[e]=this.stateChangeCallbacks[e].filter((function(e){var n=o(e,1)[0];return!t.includes(n)}))}},{key:"channel",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new O(t,e,this);return this.channels.push(n),n}},{key:"push",value:function(t){var e=this;if(this.hasLogger()){var n=t.topic,r=t.event,o=t.payload,i=t.ref,s=t.join_ref;this.log("push","".concat(n," ").concat(r," (").concat(s,", ").concat(i,")"),o)}this.isConnected()?this.encode(t,(function(t){return e.conn.send(t)})):this.sendBuffer.push((function(){return e.encode(t,(function(t){return e.conn.send(t)}))}))}},{key:"makeRef",value:function(){var t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}},{key:"sendHeartbeat",value:function(){if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.hasLogger()&&this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void this.abnormalClose("heartbeat timeout");this.pendingHeartbeatRef=this.makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef})}}},{key:"abnormalClose",value:function(t){this.closeWasClean=!1,this.conn.close(1e3,t)}},{key:"flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((function(t){return t()})),this.sendBuffer=[])}},{key:"onConnMessage",value:function(t){var e=this;this.decode(t.data,(function(t){var n=t.topic,r=t.event,i=t.payload,s=t.ref,a=t.join_ref;s&&s===e.pendingHeartbeatRef&&(e.pendingHeartbeatRef=null),e.hasLogger()&&e.log("receive","".concat(i.status||""," ").concat(n," ").concat(r," ").concat(s&&"("+s+")"||""),i);for(var u=0;u<e.channels.length;u++){var c=e.channels[u];c.isMember(n,r,i,a)&&c.trigger(r,i,s,a)}for(var h=0;h<e.stateChangeCallbacks.message.length;h++)(0,o(e.stateChangeCallbacks.message[h],2)[1])(t)}))}}]),t}(),M=function(){function t(e){i(this,t),this.endPoint=null,this.token=null,this.skipHeartbeat=!0,this.onopen=function(){},this.onerror=function(){},this.onmessage=function(){},this.onclose=function(){},this.pollEndpoint=this.normalizeEndpoint(e),this.readyState=p,this.poll()}return u(t,[{key:"normalizeEndpoint",value:function(t){return t.replace("ws://","http://").replace("wss://","https://").replace(new RegExp("(.*)/"+x),"$1/"+P)}},{key:"endpointURL",value:function(){return I.appendParams(this.pollEndpoint,{token:this.token})}},{key:"closeAndRetry",value:function(){this.close(),this.readyState=p}},{key:"ontimeout",value:function(){this.onerror("timeout"),this.closeAndRetry()}},{key:"poll",value:function(){var t=this;this.readyState!==d&&this.readyState!==p||I.request("GET",this.endpointURL(),"application/json",null,this.timeout,this.ontimeout.bind(this),(function(e){if(e){var n=e.status,r=e.token,o=e.messages;t.token=r}else n=0;switch(n){case 200:o.forEach((function(e){return t.onmessage({data:e})})),t.poll();break;case 204:t.poll();break;case 410:t.readyState=d,t.onopen(),t.poll();break;case 0:case 500:t.onerror(),t.closeAndRetry();break;default:throw new Error("unhandled poll status ".concat(n))}}))}},{key:"send",value:function(t){var e=this;I.request("POST",this.endpointURL(),"application/json",t,this.timeout,this.onerror.bind(this,"timeout"),(function(t){t&&200===t.status||(e.onerror(t&&t.status),e.closeAndRetry())}))}},{key:"close",value:function(t,e){this.readyState=y,this.onclose()}}]),t}(),I=function(){function t(){i(this,t)}return u(t,null,[{key:"request",value:function(t,e,n,r,o,i,s){if(l.XDomainRequest){var a=new XDomainRequest;this.xdomainRequest(a,t,e,r,o,i,s)}else{var u=l.XMLHttpRequest?new l.XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP");this.xhrRequest(u,t,e,n,r,o,i,s)}}},{key:"xdomainRequest",value:function(t,e,n,r,o,i,s){var a=this;t.timeout=o,t.open(e,n),t.onload=function(){var e=a.parseJSON(t.responseText);s&&s(e)},i&&(t.ontimeout=i),t.onprogress=function(){},t.send(r)}},{key:"xhrRequest",value:function(t,e,n,r,o,i,s,a){var u=this;t.open(e,n,!0),t.timeout=i,t.setRequestHeader("Content-Type",r),t.onerror=function(){a&&a(null)},t.onreadystatechange=function(){if(t.readyState===u.states.complete&&a){var e=u.parseJSON(t.responseText);a(e)}},s&&(t.ontimeout=s),t.send(o)}},{key:"parseJSON",value:function(t){if(!t||""===t)return null;try{return JSON.parse(t)}catch(e){return console&&console.log("failed to parse JSON response",t),null}}},{key:"serialize",value:function(t,e){var n=[];for(var o in t)if(t.hasOwnProperty(o)){var i=e?"".concat(e,"[").concat(o,"]"):o,s=t[o];"object"===r(s)?n.push(this.serialize(s,i)):n.push(encodeURIComponent(i)+"="+encodeURIComponent(s))}return n.join("&")}},{key:"appendParams",value:function(t,e){if(0===Object.keys(e).length)return t;var n=t.match(/\?/)?"&":"?";return"".concat(t).concat(n).concat(this.serialize(e))}}]),t}();I.states={complete:4};var q=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t);var o=r.events||{state:"presence_state",diff:"presence_diff"};this.state={},this.pendingDiffs=[],this.channel=e,this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}},this.channel.on(o.state,(function(e){var r=n.caller,o=r.onJoin,i=r.onLeave,s=r.onSync;n.joinRef=n.channel.joinRef(),n.state=t.syncState(n.state,e,o,i),n.pendingDiffs.forEach((function(e){n.state=t.syncDiff(n.state,e,o,i)})),n.pendingDiffs=[],s()})),this.channel.on(o.diff,(function(e){var r=n.caller,o=r.onJoin,i=r.onLeave,s=r.onSync;n.inPendingSyncState()?n.pendingDiffs.push(e):(n.state=t.syncDiff(n.state,e,o,i),s())}))}return u(t,[{key:"onJoin",value:function(t){this.caller.onJoin=t}},{key:"onLeave",value:function(t){this.caller.onLeave=t}},{key:"onSync",value:function(t){this.caller.onSync=t}},{key:"list",value:function(e){return t.list(this.state,e)}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel.joinRef()}}],[{key:"syncState",value:function(t,e,n,r){var o=this,i=this.clone(t),s={},a={};return this.map(i,(function(t,n){e[t]||(a[t]=n)})),this.map(e,(function(t,e){var n=i[t];if(n){var r=e.metas.map((function(t){return t.phx_ref})),u=n.metas.map((function(t){return t.phx_ref})),c=e.metas.filter((function(t){return u.indexOf(t.phx_ref)<0})),h=n.metas.filter((function(t){return r.indexOf(t.phx_ref)<0}));c.length>0&&(s[t]=e,s[t].metas=c),h.length>0&&(a[t]=o.clone(n),a[t].metas=h)}else s[t]=e})),this.syncDiff(i,{joins:s,leaves:a},n,r)}},{key:"syncDiff",value:function(t,e,n,r){var o=e.joins,i=e.leaves,s=this.clone(t);return n||(n=function(){}),r||(r=function(){}),this.map(o,(function(t,e){var r=s[t];if(s[t]=e,r){var o,i=s[t].metas.map((function(t){return t.phx_ref})),a=r.metas.filter((function(t){return i.indexOf(t.phx_ref)<0}));(o=s[t].metas).unshift.apply(o,function(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(a))}n(t,r,e)})),this.map(i,(function(t,e){var n=s[t];if(n){var o=e.metas.map((function(t){return t.phx_ref}));n.metas=n.metas.filter((function(t){return o.indexOf(t.phx_ref)<0})),r(t,n,e),0===n.metas.length&&delete s[t]}})),s}},{key:"list",value:function(t,e){return e||(e=function(t,e){return e}),this.map(t,(function(t,n){return e(t,n)}))}},{key:"map",value:function(t,e){return Object.getOwnPropertyNames(t).map((function(n){return e(n,t[n])}))}},{key:"clone",value:function(t){return JSON.parse(JSON.stringify(t))}}]),t}(),H=function(){function t(e,n){i(this,t),this.callback=e,this.timerCalc=n,this.timer=null,this.tries=0}return u(t,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var t=this;clearTimeout(this.timer),this.timer=setTimeout((function(){t.tries=t.tries+1,t.callback()}),this.timerCalc(this.tries+1))}}]),t}()}])},"object"==s(e)&&"object"==s(t)?t.exports=i():(r=[],void 0===(o="function"===typeof(n=i)?n.apply(e,r):n)||(t.exports=o))}).call(this,n(10)(t))},6:function(t,e,n){t.exports=n(71)},71:function(t,e,n){var r=function(t){"use strict";var e=Object.prototype,n=e.hasOwnProperty,r="function"===typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function a(t,e,n,r){var o=e&&e.prototype instanceof h?e:h,i=Object.create(o.prototype),s=new _(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return E()}for(n.method=o,n.arg=i;;){var s=n.delegate;if(s){var a=b(s,n);if(a){if(a===c)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var h=u(t,e,n);if("normal"===h.type){if(r=n.done?"completed":"suspendedYield",h.arg===c)continue;return{value:h.arg,done:n.done}}"throw"===h.type&&(r="completed",n.method="throw",n.arg=h.arg)}}}(t,n,s),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(r){return{type:"throw",arg:r}}}t.wrap=a;var c={};function h(){}function l(){}function f(){}var p={};p[o]=function(){return this};var d=Object.getPrototypeOf,v=d&&d(d(j([])));v&&v!==e&&n.call(v,o)&&(p=v);var y=f.prototype=h.prototype=Object.create(p);function m(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function g(t,e){var r;this._invoke=function(o,i){function s(){return new e((function(r,s){!function r(o,i,s,a){var c=u(t[o],t,i);if("throw"!==c.type){var h=c.arg,l=h.value;return l&&"object"===typeof l&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,s,a)}),(function(t){r("throw",t,s,a)})):e.resolve(l).then((function(t){h.value=t,s(h)}),(function(t){return r("throw",t,s,a)}))}a(c.arg)}(o,i,r,s)}))}return r=r?r.then(s,s):s()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var r=u(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,c;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function k(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(k,this),this.reset(!0)}function j(t){if(t){var e=t[o];if(e)return e.call(t);if("function"===typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:E}}function E(){return{value:void 0,done:!0}}return l.prototype=y.constructor=f,f.constructor=l,f[s]=l.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"===typeof t&&t.constructor;return!!e&&(e===l||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,f):(t.__proto__=f,s in t||(t[s]="GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},m(g.prototype),g.prototype[i]=function(){return this},t.AsyncIterator=g,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var s=new g(a(e,n,r,o),i);return t.isGeneratorFunction(n)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},m(y),y[s]="Generator",y[o]=function(){return this},y.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=j,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return s.type="throw",s.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],s=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=t,s.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:j(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),c}},t}(t.exports);try{regeneratorRuntime=r}catch(o){Function("r","regeneratorRuntime = r")(r)}}}]);
//# sourceMappingURL=1.d554e1a07742c53d39d6.chunk.js.map